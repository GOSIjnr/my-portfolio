@page "/contact"
@using System.Text.Json

<div class="contact">
	<div class="contact__grid">
		<ContactForm />

		<div class="contact__info">
			@foreach (ContactInfo info in AppContent.User.ContactInfos)
			{
				<ContactOption ContactInfo="@info" />
			}
		</div>
	</div>
</div>

@code {
	[Inject] private AppContent AppContent { get; set; } = null!;
	[Inject] private SelectedServiceState SelectedServiceState { get; set; } = null!;

	private ContactFormModel _formModel = new();
	private ServiceInfo? _selectedService;

	protected override void OnInitialized()
	{
		_selectedService = SelectedServiceState.ConsumeSelectedService();

		if (_selectedService != null)
		{
			Console.WriteLine($"Selected service received: {_selectedService.Name}");
		}
		else
		{
			Console.WriteLine("No selected service received.");
		}
	}

	private void HandleValidSubmit()
	{
		Console.WriteLine("Email sent successfully!");
		Console.WriteLine(JsonSerializer.Serialize(_formModel));
	}
}
