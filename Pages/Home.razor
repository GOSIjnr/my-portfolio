@page "/"

<div class="hero">
	<div class="hero__background" />

	<div class="hero__overlay">
		<div class="hero__content">
			<h1 class="hero__title">
				@_homePageContentInfo.MainTitle
				<span class="hero__title --highlight">@_homePageContentInfo.HighlightedTitlePart</span>
			</h1>

			<p class="hero__description">
				@_homePageContentInfo.DescriptionBody
			</p>

			<div class="hero__buttons">
				<div class="hero__button">
					<NavLinkItem NavigationLinkInfo="@(AppContent?.Layout?.ContactMeLinkAccent ?? new())"
						LinkType="@TargetUrlFormat.HashPrefix" />
				</div>

				<div class="hero__button">
					<NavLinkItem NavigationLinkInfo="@(AppContent?.Layout?.CheckMyProjectsLink ?? new())"
						LinkType="@TargetUrlFormat.HashPrefix" />
				</div>
			</div>

			<!-- Resume Actions -->
			<div class="resume__actions">
				<button class="resume__button" @onclick="DownloadResume">Download Resume (DOCX)</button>
				<button class="resume__button resume__button--secondary" @onclick="PreviewResume">
					Preview Resume (PDF Style)
				</button>
			</div>
		</div>
	</div>
</div>

@code {

	[Inject] private IJSRuntime? Js { get; set; }
	[Inject] private AppContent? AppContent { get; set; }

	private HomePageContentInfo _homePageContentInfo => AppContent?.Layout?.HomePageContent ?? new();

	private string docxFileId = "1NdPAG_6jcNHaFta0fJK6lT5TlNLzEMgQ";
	private string previewFileId = "1NdPAG_6jcNHaFta0fJK6lT5TlNLzEMgQ";

	private async Task DownloadResume()
	{
		if (Js is null) return;

		string url = $"https://drive.google.com/uc?export=download&id={docxFileId}";
		await Js.InvokeVoidAsync("downloadFile", url);
	}

	private async Task PreviewResume()
	{
		if (Js is null) return;

		string previewUrl = $"https://drive.google.com/file/d/{previewFileId}/preview";
		await Js.InvokeVoidAsync("openFileInNewTab", previewUrl);
	}
}
