@page "/contact"

<div class="contact">
	<div class="contact__grid">
		<ContactForm ServicesNames="@_serviceNames" SelectedService="@_selectedService?.Name" />

		<div class="contact__info">
			@foreach (ContactInfo info in AppContent.User.ContactInfos)
			{
				<ContactOption ContactInfo="@info" />
			}
		</div>
	</div>
</div>

@code {
	[Inject] private AppContent AppContent { get; set; } = null!;
	[Inject] private SelectedServiceState SelectedServiceState { get; set; } = null!;

	private ServiceInfo? _selectedService;
	private List<string> _serviceNames = [];

	protected override void OnInitialized()
	{
		ConsumeSelectedService();
		PopulateServicesOffered();
	}

	private void ConsumeSelectedService()
	{
		_selectedService = SelectedServiceState.ConsumeSelectedService();
	}

	private void PopulateServicesOffered()
	{

		foreach (ServiceInfo serviceInfo in AppContent.User.ServiceInfos)
		{
			_serviceNames.Add(serviceInfo.Name);
		}

		_serviceNames.Add("Others");
	}
}
